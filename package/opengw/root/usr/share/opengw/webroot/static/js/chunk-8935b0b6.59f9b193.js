(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8935b0b6"],{2680:function(t,e,a){},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"3d3b":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:6}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24}},[a("el-input",{staticStyle:{width:"100%","margin-right":"10px"},attrs:{placeholder:"输入上报服务名称过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:12,md:18}},[a("el-button",{staticStyle:{float:"right","margin-left":"5px"},attrs:{type:"primary"},on:{click:function(e){t.addVisible=!0,t.form={},t.Param={},t.title="添加上报服务",t.mode="post"}}},[t._v("添加")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.getReportDeviceList}},[t._v("刷新")])],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},t._l(t.filtedData,(function(e,r){return a("el-col",{key:r,staticStyle:{"margin-bottom":"10px"},attrs:{xs:24,sm:12,md:8}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.ServiceName))]),t._v(" "),a("el-tag",{attrs:{type:t._f("commFilter")(e.CommStatus)}},[t._v(t._s(t._f("netWorkFilter")(e.CommStatus)))]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.handelGetDeviceListByReportService(e)}}},[t._v("上报结点")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.editReportService(e)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.deleteReportService(e)}}},[t._v("删除")])],1),t._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("协议类型：")])]),t._v(" "),a("el-col",{attrs:{xs:16,sm:16,md:16}},[a("el-tag",{attrs:{type:t._f("statusFilter")(e.Protocol)}},[t._v(t._s(t._f("ProtocolFilter")(e.Protocol)))])],1)],1),t._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("上报地址：")])]),t._v(" "),a("el-col",{attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.IP))])])],1),t._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("上报端口：")])]),t._v(" "),a("el-col",{attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Port))])])],1),t._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("上报周期：")])]),t._v(" "),a("el-col",{attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.ReportTime+" 秒"))])])],1),t._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[e.Param?a("el-collapse-item",{attrs:{title:"详细参数",name:e.ServiceName}},[e.Param&&"Aliyun.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("产品秘钥：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.ProductKey))])])],1):t._e(),t._v(" "),e.Param&&"Aliyun.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("设备名称：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.DeviceName))])])],1):t._e(),t._v(" "),e.Param&&"Aliyun.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("设备秘钥：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.DeviceSecret))])])],1):t._e(),t._v(" "),e.Param&&"EMQX.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("客户端ID：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.ClientID))])])],1):t._e(),t._v(" "),e.Param&&"EMQX.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("用户名：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.UserName))])])],1):t._e(),t._v(" "),e.Param&&"EMQX.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("密码：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("el-tooltip",{staticStyle:{margin:"4px"},attrs:{effect:"dark",content:e.Param.Password,placement:"top-start"}},[a("span",[t._v(t._s(e.Param.Password))])])],1)],1):t._e(),t._v(" "),e.Param&&"ThingsBoard.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("名称：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.ClientID))])])],1):t._e(),t._v(" "),e.Param&&"ThingsBoard.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("设备凭据：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.UserName))])])],1):t._e(),t._v(" "),e.Param&&"ThingsBoard.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("密码：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("el-tooltip",{staticStyle:{margin:"4px"},attrs:{effect:"dark",content:e.Param.Password,placement:"top-start"}},[a("span",[t._v(t._s(e.Param.Password))])])],1)],1):t._e(),t._v(" "),e.Param&&"Huawei.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("设备ID：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.DeviceID))])])],1):t._e(),t._v(" "),e.Param&&"Huawei.MQTT"==e.Protocol?a("el-row",{staticClass:"text item"},[a("el-col",{staticStyle:{"align-self":"center","text-align":"right"},attrs:{xs:8,sm:8,md:8}},[a("span",[t._v("密钥：")])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{xs:16,sm:16,md:16}},[a("span",[t._v(t._s(e.Param.DeviceSecret))])])],1):t._e()],1):t._e()],1)],1)],1)})),1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.addVisible,width:"30%"},on:{"update:visible":function(e){t.addVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"服务名称"}},[a("el-input",{model:{value:t.form.ServiceName,callback:function(e){t.$set(t.form,"ServiceName",e)},expression:"form.ServiceName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上报地址"}},[a("el-input",{model:{value:t.form.IP,callback:function(e){t.$set(t.form,"IP",e)},expression:"form.IP"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上报端口"}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.Port,callback:function(e){t.$set(t.form,"Port",e)},expression:"form.Port"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上报周期"}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.ReportTime,callback:function(e){t.$set(t.form,"ReportTime",t._n(e))},expression:"form.ReportTime"}},[a("template",{slot:"append"},[t._v("秒")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"协议类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"协议类型"},model:{value:t.form.Protocol,callback:function(e){t.$set(t.form,"Protocol",e)},expression:"form.Protocol"}},t._l(t.ProtocolList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.id}})})),1)],1),t._v(" "),"Aliyun.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"输入产品秘钥"}},[a("el-input",{attrs:{placeholder:"请输入ProductKey"},model:{value:t.Param.ProductKey,callback:function(e){t.$set(t.Param,"ProductKey",e)},expression:"Param.ProductKey"}})],1):t._e(),t._v(" "),"Aliyun.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"输入设备名称"}},[a("el-input",{attrs:{placeholder:"请输入DeviceName"},model:{value:t.Param.DeviceName,callback:function(e){t.$set(t.Param,"DeviceName",e)},expression:"Param.DeviceName"}})],1):t._e(),t._v(" "),"Aliyun.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"输入设备秘钥"}},[a("el-input",{attrs:{placeholder:"请输入DeviceSecret"},model:{value:t.Param.DeviceSecret,callback:function(e){t.$set(t.Param,"DeviceSecret",e)},expression:"Param.DeviceSecret"}})],1):t._e(),t._v(" "),"Huawei.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"输入设备ID"}},[a("el-input",{attrs:{placeholder:"请输入DeviceID"},model:{value:t.Param.DeviceID,callback:function(e){t.$set(t.Param,"DeviceID",e)},expression:"Param.DeviceID"}})],1):t._e(),t._v(" "),"Huawei.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"输入密钥"}},[a("el-input",{attrs:{placeholder:"请输入DeviceSecret"},model:{value:t.Param.DeviceSecret,callback:function(e){t.$set(t.Param,"DeviceSecret",e)},expression:"Param.DeviceSecret"}})],1):t._e(),t._v(" "),"EMQX.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"客户端id"}},[a("el-input",{attrs:{placeholder:"请输入客户端id"},model:{value:t.Param.ClientID,callback:function(e){t.$set(t.Param,"ClientID",e)},expression:"Param.ClientID"}})],1):t._e(),t._v(" "),"EMQX.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"输入用户名"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.Param.UserName,callback:function(e){t.$set(t.Param,"UserName",e)},expression:"Param.UserName"}})],1):t._e(),t._v(" "),"EMQX.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"输入用户密码"}},[a("el-input",{attrs:{placeholder:"请输入用户密码"},model:{value:t.Param.Password,callback:function(e){t.$set(t.Param,"Password",e)},expression:"Param.Password"}})],1):t._e(),t._v(" "),"ThingsBoard.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.Param.ClientID,callback:function(e){t.$set(t.Param,"ClientID",e)},expression:"Param.ClientID"}})],1):t._e(),t._v(" "),"ThingsBoard.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"输入设备凭据"}},[a("el-input",{attrs:{placeholder:"请输入设备凭据"},model:{value:t.Param.UserName,callback:function(e){t.$set(t.Param,"UserName",e)},expression:"Param.UserName"}})],1):t._e(),t._v(" "),"ThingsBoard.MQTT"==t.form.Protocol?a("el-form-item",{attrs:{label:"输入密码"}},[a("el-input",{attrs:{placeholder:"请输入密码"},model:{value:t.Param.Password,callback:function(e){t.$set(t.Param,"Password",e)},expression:"Param.Password"}})],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addVisible=!1,t.form={}}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.operatorReportService}},[t._v("确 定")])],1)],1)],1)},o=[],s=(a("6b54"),{filters:{statusFilter:function(t){var e={"Aliyun.MQTT":"success","EMQX.MQTT":"gray","ThingsBoard.MQTT":"gray",TcpServer:"danger","Huawei.MQTT":"warning"};return e[t]||"info"},commFilter:function(t){var e={onLine:"success",offLine:"gray"};return e[t]||"info"},netWorkFilter:function(t){var e={onLine:"在线",offLine:"离线"};return e[t]||"未知"},ProtocolFilter:function(t){var e={"Aliyun.MQTT":"阿里云mqtt服务","EMQX.MQTT":"EMQX(mqtt)服务","ThingsBoard.MQTT":"ThingsBoard(mqtt)服务",TcpServer:"Tcp服务端","Huawei.MQTT":"华为云mqtt服务"};return e[t]||"未知"},parityFilter:function(t){return"N"===t?"无校验":"J"===t?"奇校验":"O"===t?"偶校验":"未知"}},data:function(){return{serialList:[],listLoading:!0,form:{},filterText:"",editVisible:!1,baudRateList:[],ParityList:[],ProtocolList:[],addVisible:!1,reportSeviceMap:[],activeNames:"11",Param:{},title:"",mode:""}},computed:{filtedData:function(){var t=this;return this.reportSeviceMap.filter((function(e){if(e.ServiceName.toString().indexOf(t.filterText)>-1)return e}))}},created:function(){this.getReportDeviceList(),this.ProtocolList=[{id:"Aliyun.MQTT",text:"阿里云mqtt服务"},{id:"EMQX.MQTT",text:"EMQX服务"},{id:"Huawei.MQTT",text:"华为云mqtt服务"},{id:"ThingsBoard.MQTT",text:"ThingsBoard(mqtt)服务"}]},methods:{getReportDeviceList:function(){var t=this,e="";e="./api/v1/report/param",this.$axios({method:"get",url:e,headers:{token:this.$store.getters.token}}).then((function(e){var a=e.data;"0"===a.Code?(t.reportSeviceMap=a.Data,t.$message.success("获取上报服务列表成功")):"1"===a.Code?t.$message.error(a.Message):"-1"===a.Code?(t.$message.error(a.Message),t.$store.dispatch("user/resetToken"),t.$router.push("/login?redirect=".concat(t.$route.fullPath))):t.$message.error("返回未知错误，错误码："+a.Code)})).catch((function(e){t.$message.error("出错了"+JSON.stringify(e))}))},selectProtocol:function(t){console.log(t)},handleEdit:function(t,e){this.form=e,this.editVisible=!0},operatorReportService:function(){var t="",e={};if("Aliyun.MQTT"===this.form.Protocol&&"post"===this.mode)t="param",e.ServiceName=this.form.ServiceName,e.IP=this.form.IP,e.Port=this.form.Port.toString(),e.ReportTime=this.form.ReportTime,e.Protocol=this.form.Protocol,e.Param=this.Param;else if("Huawei.MQTT"===this.form.Protocol&&"post"===this.mode)t="param",e.ServiceName=this.form.ServiceName,e.IP=this.form.IP,e.Port=this.form.Port.toString(),e.ReportTime=this.form.ReportTime,e.Protocol=this.form.Protocol,e.Param=this.Param;else if("EMQX.MQTT"===this.form.Protocol&&"post"===this.mode)t="param",e.ServiceName=this.form.ServiceName,e.IP=this.form.IP,e.Port=this.form.Port.toString(),e.ReportTime=this.form.ReportTime,e.Protocol=this.form.Protocol,e.Param=this.Param;else if("ThingsBoard.MQTT"===this.form.Protocol&&"post"===this.mode)t="param",e.ServiceName=this.form.ServiceName,e.IP=this.form.IP,e.Port=this.form.Port.toString(),e.ReportTime=this.form.ReportTime,e.Protocol=this.form.Protocol,e.Param=this.Param;else if("Aliyun.MQTT"===this.form.Protocol&&"delete"===this.mode)t="param",e.ServiceName=this.form.ServiceName;else if("Huawei.MQTT"===this.form.Protocol&&"delete"===this.mode)t="param",e.ServiceName=this.form.ServiceName;else if("EMQX.MQTT"===this.form.Protocol&&"delete"===this.mode)t="param",e.ServiceName=this.form.ServiceName;else{if("ThingsBoard.MQTT"!==this.form.Protocol||"delete"!==this.mode)return void this.$message.error("协议或者请求模式错误");t="param",e.ServiceName=this.form.ServiceName}var a=this,r="";r="./api/v1/report/"+t,this.$axios({method:a.mode,url:r,data:e,headers:{token:this.$store.getters.token}}).then((function(t){var e=t.data;"0"===e.Code?(a.addVisible=!1,"post"===a.mode&&(a.$message.success("添加(修改)上报服务成功"),a.getReportDeviceList()),"delete"===a.mode&&(a.$message.success("删除上报服务成功"),a.getReportDeviceList())):"1"===e.Code?a.$message.error(e.Message):"-1"===e.Code?(a.$message.error(e.Message),a.$store.dispatch("user/resetToken"),a.$router.push("/login?redirect=".concat(a.$route.fullPath))):a.$message.error("返回未知错误，错误码："+e.Code)})).catch((function(t){a.$message.error("出错了"+JSON.stringify(t))}))},handelGetDeviceListByReportService:function(t){this.$router.push({name:"reportDeviceManager",params:{ServiceName:t.ServiceName,Protocol:t.Protocol}})},editReportService:function(t){var e=this;this.form={},this.Param={},this.addVisible=!0,this.form=t,this.$set(e.form,"ServiceName",t.ServiceName),this.$set(e.form,"Protocol",t.Protocol),this.Param=t.Param,this.title="修改上报服务",this.mode="post"},deleteReportService:function(t){var e=this,a=this;this.$messageBox.confirm("你确定要删除上报服务吗？<br /><h3>"+t.ServiceName+"</h3>","删除上报",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,dangerouslyUseHTMLString:!0,type:"info"}).then((function(r){"confirm"===r&&(e.form={},e.Param={},e.form=t,e.$set(a.form,"ServiceName",t.ServiceName),e.$set(a.form,"Protocol",t.Protocol),e.Param=t.Param,e.mode="delete",a.operatorReportService())})).catch((function(t){"cancel"===t&&console.log("cancel")}))}}}),i=s,l=(a("bb51"),a("2877")),c=Object(l["a"])(i,r,o,!1,null,"dc2a1f66",null);e["default"]=c.exports},"6b54":function(t,e,a){"use strict";a("3846");var r=a("cb7c"),o=a("0bfb"),s=a("9e1e"),i="toString",l=/./[i],c=function(t){a("2aba")(RegExp.prototype,i,t,!0)};a("79e5")((function(){return"/a/b"!=l.call({source:"a",flags:"b"})}))?c((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?o.call(t):void 0)})):l.name!=i&&c((function(){return l.call(this)}))},bb51:function(t,e,a){"use strict";var r=a("2680"),o=a.n(r);o.a}}]);